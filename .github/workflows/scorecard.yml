# OpenSSF Scorecard - publishes security score for Code Exchange / DevNet
# https://github.com/ossf/scorecard-action | https://securityscorecards.dev/

name: OpenSSF Scorecard

on:
  push:
    branches: [ "main" ]
  schedule:
    - cron: '0 6 * * 1'  # Mondays 06:00 UTC
  workflow_dispatch:  # Manual run: Actions → OpenSSF Scorecard → Run workflow

jobs:
  scorecard:
    name: Scorecard
    runs-on: ubuntu-latest
    permissions:
      security-events: write
      id-token: write
      actions: read
      contents: read

    steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Run Scorecard
      uses: ossf/scorecard-action@v2.4.3
      with:
        publish_results: true
        results_format: sarif
        results_file: scorecard-results.sarif

    - name: Upload Scorecard results to Security tab
      uses: github/codeql-action/upload-sarif@v3
      if: success()
      with:
        sarif_file: scorecard-results.sarif
        category: scorecard
